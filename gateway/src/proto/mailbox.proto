syntax = "proto3";

package mailbox;

service MailboxService {
  rpc GetMailbox (GetMailboxRequest) returns (MailboxResponse);
  rpc GetEmails (GetEmailsRequest) returns (EmailListResponse);
  rpc GetEmail (GetEmailRequest) returns (EmailResponse);
  rpc DeleteEmail (DeleteEmailRequest) returns (DeleteResponse);
}

message GetMailboxRequest {
  string user_id = 1;
}

message MailboxResponse {
  string id = 1;
  string email = 2;
  int32 message_count = 3;
}

message GetEmailsRequest {
  string mailbox_id = 1;
  int32 page = 2;
  int32 limit = 3;
}

message EmailListResponse {
  repeated Email emails = 1;
  int32 total = 2;
}

message Email {
  string id = 1;
  string from = 2;
  string subject = 3;
  string preview = 4;
  string received_at = 5;
  bool is_read = 6;
}

message GetEmailRequest {
  string email_id = 1;
}

message EmailResponse {
  string id = 1;
  string from = 2;
  string to = 3;
  string subject = 4;
  string body = 5;
  string received_at = 6;
}

message DeleteEmailRequest {
  string email_id = 1;
}

message DeleteResponse {
  bool success = 1;
  string message = 2;
}
